#include <iostream>
#include <vector>
#include <algorithm>
#include <cassert>

struct Rectangle {
    int x_left_up = 0;
    int y_left_up = 0;
    int x_right_down = 0;
    int y_right_down = 0;
    Rectangle(int x1_, int y1_, int x2_, int y2_)
        : x_left_up(x1_), y_left_up(y1_), x_right_down(x2_), y_right_down(y2_) {}
    long long area() const {
      return std::max(0, x_right_down - x_left_up) * std::max(0, y_right_down - y_left_up);
    }
};

Rectangle intersect(const Rectangle& a, const Rectangle& b) {
    int nx1 = std::max(a.x_left_up, b.x_left_up);
    int ny1 = std::max(a.y_left_up, b.y_left_up);
    int nx2 = std::min(a.x_right_down, b.x_right_down);
    int ny2 = std::min(a.y_right_down, b.y_right_down);
    if (nx1 >= nx2 || ny1 >= ny2) {
        return Rectangle(0, 0, 0, 0);
    }
    return Rectangle(nx1, ny1, nx2, ny2);
}

int intersectall(const std::vector<Rectangle>& rects) {
    if (rects.empty()) {
      return 0;
    }
    Rectangle res = rects[0];
    for (size_t i = 1; i < rects.size(); ++i) {
        res = intersect(res, rects[i]);
    }
    return res.area();
}
Rectangle thebiggestrect(const std::vector<Rectangle>& rects) {
    if (rects.empty()) {
      return Rectangle(0, 0, 0, 0);
    }
    int bx1 = rects[0].x_left_up;
    int by1 = rects[0].y_left_up;
    int bx2 = rects[0].x_right_down;
    int by2 = rects[0].y_right_down;
    for (const auto& r : rects) {
        bx1 = std::min(bx1, r.x_left_up);
        by1 = std::min(by1, r.y_left_up);
        bx2 = std::max(bx2, r.x_right_down);
        by2 = std::max(by2, r.y_right_down);
    }
    return Rectangle(bx1, by1, bx2, by2);
}

void test1(Rectangle& a, Rectangle& b, Rectangle& c, std::vector<Rectangle>& r1) {
  Rectangle ab = intersect(a, b);
  Rectangle cover = thebiggestrect(r1);

  assert(ab.x_left_up == 1 && ab.y_left_up == 1 && ab.x_right_down == 3 && ab.y_right_down == 3);
  assert(intersectall(r1) == 1);
  assert(cover.x_left_up == 0 && cover.y_left_up == 0 && cover.x_right_down == 5 && cover.y_right_down == 4);
}

void test2(Rectangle& d, Rectangle& e, Rectangle& f, std::vector<Rectangle>& r2) {
  Rectangle de = intersect(d, e);
  Rectangle nocover = thebiggestrect(r2);

  assert(de.area() == 0);
  assert(nocover.x_left_up == 0 && nocover.y_left_up == 0 && nocover.x_right_down == 12 && nocover.y_right_down == 12);
  assert(intersectall(r2) == 0);
}

int main() {
  Rectangle a(0, 0, 3, 3);
  Rectangle b(1, 1, 4, 4);
  Rectangle c(2, 0, 5, 2);
  std::vector<Rectangle> r1 = {a, b, c};

  test1(a, b, c, r1);
  
  Rectangle d(10, 10, 12, 12);
  Rectangle e(0, 0, 5, 5);
  Rectangle f(6, 6, 7, 7);
  std::vector<Rectangle> r2 = {d, e, f};

  return 0;
}
